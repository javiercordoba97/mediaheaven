<!DOCTYPE html>
<html lang="en">

<%- include("../partials/head") %>

  <body>

    <%- include("../partials/header") %>
      <main class="login">
        <div class="login-container">
          <h1>Editar Producto</h1>
          <form action="/edicion/<%=productoEncontrado.id%>?_method=put" method="POST" enctype="multipart/form-data">

            <label for="nombre">Nombre del producto:</label>
            <input value="<%=productoEncontrado.nombre%>"  id="nombre" name="nombre">

            <!-- Muestra la imagen actual del producto para referencia -->
            <% if (productoEncontrado.imagen) { %>
              <div style="margin: 16px 0;">
                <img src="<%= productoEncontrado.imagen %>" alt="Imagen actual" class="producto-img" style="max-width: 220px; max-height: 220px; display:block; margin:0 auto;">
              </div>
            <% } %>

            <label for="imagen">Imagen (sube una nueva para reemplazar):</label>
            <input type="file" id="imagen" name="imagen" accept="image/*">

            <label for="precio">Precio:</label>
            <input value="<%=productoEncontrado.precio%>" type="number" id="precio" name="precio" required>

            <label for="categoria">Seleciona la categoria</label>
            <select id="categoria" name="categoria" required>
              <option value="1" <%= productoEncontrado.categoria == 1 ? "selected" : "" %>>Aventuras</option>
              <option value="2" <%= productoEncontrado.categoria == 2 ? "selected" : "" %>>Acción</option>
              <option value="3" <%= productoEncontrado.categoria == 3 ? "selected" : "" %>>Juego de MMO</option>
              <option value="4" <%= productoEncontrado.categoria == 4 ? "selected" : "" %>>Estrategia</option>
              <option value="5" <%= productoEncontrado.categoria == 5 ? "selected" : "" %>>Coopertativos</option>
              <option value="6" <%= productoEncontrado.categoria == 6 ? "selected" : "" %>>Deportes y Carreras</option>
            </select>

            <label for="estreno">Fecha de lanzamiento</label>
            <input type="date" value="<%=productoEncontrado.estreno%>" id="estreno" name="estreno" required>

            <label for="rating">Rating</label>
            <input type="number" value="<%=productoEncontrado.rating%>" id="rating" name="rating" required>

            <label for="description">Descripción:</label>
            <input value="<%=productoEncontrado.descripcion%>" id="description" name="description" required>

            <button type="submit">Editar</button>
          </form>
          <form action="/edicion/<%=productoEncontrado.id%>?_method=Delete" method="post">
            <button class="delete" type="submit">Delete</button>
          </form>
        </div>
      </main>
      <%- include("../partials/footer") %>
  </body>

</html>